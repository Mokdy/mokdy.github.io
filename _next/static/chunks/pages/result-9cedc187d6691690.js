(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[968],{6328:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/result",function(){return t(4173)}])},4173:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return K}});var n=t(2322),a=t(2784);function o(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function s(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){o(e,r,t[r])}))}return e}var l=function(e,r){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t&&console.log("Traversing to find: ",r);var n=function(e,r){for(var t in e){if(e[t].name===r)return e[t];if(e[t].children){var a=n(e[t].children,r);if(a)return a}}return null};if(!t)return n(e,r);var a=performance.now(),o=n(e,r);o?console.log("Found"):console.log("Not found");var s=performance.now();return console.log("Time taken: ".concat(s-a,"ms")),o},i=function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=0,n=function(e){for(var r in e)t++,e[r].children&&n(e[r].children)};if(!r)return n(e),t;var a=performance.now();n(e);var o=performance.now();return console.log("Time taken: ".concat(o-a,"ms")),t},c=function(e,r){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=[],a=function(e,r){for(var t in e){l(r,e[t].name)||n.push(e[t].name),e[t].children&&a(e[t].children,r)}};if(!t)return a(e,r),n;var o=performance.now();a(e,r);var s=performance.now();return console.log("Time taken: ".concat(s-o,"ms")),n},u=function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=[],n=[],a=function(e){for(var r in e)n.includes(e[r].name)?t.push(e[r].name):n.push(e[r].name),e[r].children&&a(e[r].children)};if(!r)return a(e),t;var o=performance.now();a(e);var s=performance.now();return console.log("Time taken: ".concat(s-o,"ms")),t},d=function(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];a&&console.log("Number of nodes before adding: ",i(e));var o=function(e,r){if(r.children&&r.children.length>0)for(var t=r.children.length-1;t>=0;t--){o(e,r.children[t]),l(e,r.children[t].name)&&r.children.splice(t,1)}},c=JSON.parse(JSON.stringify(r));if(!t)return o(e,c),void e.push(JSON.parse(JSON.stringify(c)));var u=function(e,r,t){for(var a in e){if(e[a].name===t.name){e[a].children||(e[a].children=[]);var l=JSON.parse(JSON.stringify(r));return o(e,l),n&&!r.locale?void e[a].children.push(JSON.parse(JSON.stringify(s({},l,{locale:{ar:l.name,en:""}})))):void e[a].children.push(JSON.parse(JSON.stringify(l)))}e[a].children&&u(e[a].children,r,t)}};if(a){var d=performance.now();u(e,r,t);var g=performance.now();console.log("Time taken: ".concat(g-d,"ms"))}else u(e,r,t),a&&console.log(i("Number of nodes after adding: ",e))},g=function(e){var r=[],t=function(e){for(var n in e)r.push(e[n].name),e[n].children&&t(e[n].children)};return t(e),r},m=function(e,r){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t&&console.log("Traversing to find: ",r);var n=function(e,r){for(var t in e){if(e[t].name===r)return e.splice(t,1);if(e[t].children){var a=n(e[t].children,r);if(a)return a}}return null};return n(e,r)},f=function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];r&&console.log("Traversing to fill missing locale");var t=function(e){for(var r in e)e[r].locale||(e[r].locale={ar:e[r].name,en:""}),e[r].children&&t(e[r].children)};if(r){var n=performance.now();t(e);var a=performance.now();console.log("Time taken: ".concat(a-n,"ms"))}else t(e)};function h(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function x(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function v(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){x(e,r,t[r])}))}return e}function p(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"===typeof e)return h(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return h(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var b=function(e){var r=e.category,t=e.string,o=e.userInput,s=e.container,i=e.tagIndex,c=e.userJson,u=e.setContainer,d=e.setCreatedTags,g=e.createdTags,m=e.formInfo,f=e.setForm,h=e.formWarningFlag,x=e.setFlag,b=(0,a.useState)(o),y=b[0],w=b[1],j=(0,a.useState)(o),N=j[0],T=j[1],S=(0,a.useState)(""),F=S[0],O=S[1],C=(0,a.useState)(!0),k=C[0],J=C[1],I=(0,a.useState)(!1),E=I[0],D=I[1];return N!=o&&(T(o),w(o)),0==h&&0==k&&(J(!0),x(!0)),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsxs)("label",{htmlFor:"text",className:"block mb-2 text-sm font-medium text-gray-300",children:["Tag ",t]}),(0,n.jsx)("input",{type:"text",id:"text",value:y,onKeyUp:function(e){if("Enter"==e.key&&(J(!0),D(!0),e.target.value!=s[i[0]][i[1]].name)){if("name"==r&&l(c,y))return void O("Tag already exists elsewhere!");O("");var t=l(c,s[i[0]][i[1]].name),n=JSON.parse(JSON.stringify(s)),a=t.name.slice();if("name"==r){for(var o in t.name=e.target.value,g)if(g[+o].name==a){d(p(g).concat([t]));break}f(v({},m,{name:e.target.value}))}else"type"==r&&(t.type=e.target.value,f(v({},m,{type:e.target.value})));n[i[0]][i[1]][r]=e.target.value,u(n)}},onChange:function(e){"Enter"==e.key?J(!0):(J(!1),D(!1)),w(e.target.value)},className:"border text-sm rounded-lg block w-full p-2.5 bg-gray-700 border-gray-600 placeholder-gray-400 text-white focus:ring-blue-500 focus:border-blue-500"}),k?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)("p",{className:"text-orange-400 text-[14px] absolute",children:"Press enter to confirm"}),E?(0,n.jsx)("p",{className:"absolute text-sm text-red-500",children:F}):(0,n.jsx)(n.Fragment,{})]})};function y(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function w(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){y(e,r,t[r])}))}return e}var j=function(e){var r=e.category,t=e.string,o=e.userInput,s=e.container,i=e.setContainer,c=e.tagIndex,u=e.createdTags,d=e.userJson,g=e.setForm,m=e.formInfo,f=e.formWarningFlag,h=e.setFlag,x=function(e){"Enter"==e.key?E(!0):E(!1),F(""),b(e.target.value)},v=(0,a.useState)(o),p=v[0],b=v[1],y=(0,a.useState)(o),j=y[0],N=y[1],T=(0,a.useState)(""),S=T[0],F=T[1],O=(0,a.useState)(o),C=O[0],k=O[1],J=(0,a.useState)(!0),I=J[0],E=J[1];j!=o&&(N(o),b(o)),0==f&&0==I&&(E(!0),h(!0));var D=!1;for(var P in u)if(u[P].name==s[c[0]][c[1]].name){D=!0;break}return D?(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsxs)("label",{htmlFor:"text",className:"block mb-2 text-sm font-medium text-gray-300",children:["Tag ",t]}),(0,n.jsx)("input",{type:"number",id:"text",value:p,onKeyUp:function(e){if("Enter"==e.key&&(E(!0),e.target.value!=C)){if("id"==r&&function(e,r){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t&&console.log("Traversing to find: ",r);var n=function(e,r){for(var t in e){if(e[t].id==r)return e[t];if(e[t].children){var a=n(e[t].children,r);if(a)return a}}return null};if(!t)return n(e,r);var a=performance.now(),o=n(e,r);o?console.log("Found"):console.log("Not found");var s=performance.now();return console.log("Time taken: ".concat(s-a,"ms")),o}(d,p))return void F("Tag already exists elsewhere!");k(p),F("");var t=l(d,s[c[0]][c[1]].name);if("id"==r){t.id=e.target.value,g(w({},m,{id:e.target.value}));var n=JSON.parse(JSON.stringify(s));n[c[0]][c[1]].id=t.id,i(n)}else if("mom_id"==r){t.mom_id=e.target.value,g(w({},m,{mom_id:e.target.value}));var a=JSON.parse(JSON.stringify(s));a[c[0]][c[1]].mom_id=t.mom_id,i(a)}}},onChange:x,className:"border text-sm rounded-lg block w-full p-2.5  bg-gray-700 border-gray-600 placeholder-gray-400 text-white focus:ring-blue-500 focus:border-blue-500"}),I?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)("p",{className:"text-orange-400 text-[14px] absolute",children:"Press enter to confirm"}),(0,n.jsx)("p",{className:"absolute text-sm text-red-500",children:S})]}):(0,n.jsxs)("div",{className:"",children:[(0,n.jsxs)("label",{htmlFor:"text",className:"block mb-2 text-sm font-medium text-gray-300",children:["Tag ",t]}),(0,n.jsx)("input",{type:"number",id:"text",value:p,disabled:!0,onChange:x,className:"border cursor-not-allowed text-sm rounded-lg block w-full p-2.5 bg-stone-500 border-stone-600 placeholder-gray-400 text-white focus:ring-blue-500 focus:border-blue-500"})]})};function N(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function T(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){N(e,r,t[r])}))}return e}var S=function(e){var r=e.category,t=e.string,o=e.userInput,s=e.userJson,i=e.container,c=e.tagIndex,u=e.setContainer,d=e.formInfo,g=e.setForm,m=e.formWarningFlag,f=e.setFlag,h=function(e){"Enter"==e.key?I(!0):I(!1),C(""),y(e.target.value)},x=function(e){if("Enter"==e.key){if(I(!0),E())return;v.locale||(v.locale={ar:"",en:""}),v.locale[r]=e.target.value,g(T({},d,{locale:T({},d.locale,N({},r,e.target.value))}));var t=JSON.parse(JSON.stringify(i));t[c[0]][c[1]].locale=v.locale,u(t)}},v=l(s,i[c[0]][c[1]].name),p=(0,a.useState)(v.locale[r]),b=p[0],y=p[1],w=(0,a.useState)(o),j=w[0],S=w[1],F=(0,a.useState)(""),O=F[0],C=F[1],k=(0,a.useState)(!0),J=k[0],I=k[1];j!=o&&(S(o),y(o)),0==m&&0==J&&(I(!0),f(!0));var E=function(){return C(""),""==b?(C("Local cannot be empty!"),!0):"en"==r&&null!==b.match(/[\u0600-\u06ff]|[\u0750-\u077f]|[\ufb50-\ufbc1]|[\ufbd3-\ufd3f]|[\ufd50-\ufd8f]|[\ufd92-\ufdc7]|[\ufe70-\ufefc]|[\uFDF0-\uFDFD]/)&&(C("English local mustn't contain arabic letters!"),!0)};return(0,a.useEffect)((function(){E()}),[c]),""==O?(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsxs)("label",{htmlFor:"text",className:"block mb-2 text-sm font-medium text-gray-300",children:["Tag ",t]}),(0,n.jsx)("input",{type:"text",id:"text",value:b,onChange:h,onKeyUp:x,className:"border text-sm rounded-lg block w-full p-2.5 bg-gray-700 border-gray-600 placeholder-gray-400 text-white focus:ring-blue-500 focus:border-blue-500"}),J?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)("span",{className:"text-orange-400 text-[14px] absolute",children:"Press enter to confirm"}),(0,n.jsx)("p",{className:"text-red-500 text-sm",children:O})]}):(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsxs)("label",{htmlFor:"text",className:"block mb-2 text-sm font-medium text-red-500",children:["Tag ",t]}),(0,n.jsx)("input",{type:"text",id:"text",value:b,onChange:h,onKeyUp:x,className:"border text-red-900 placeholder-red-700 text-sm rounded-lg focus:ring-red-500 focus:border-red-500 block w-full p-2.5 bg-red-100 border-red-400"}),(0,n.jsx)("p",{className:"text-red-500 text-sm absolute",children:O})]})};var F=function(e){var r=e.setCreatedTags,t=e.formInfo,a=e.container,o=e.tagIndex,s=e.userJson,l=e.setContainer,i=e.createdTags,c=e.setForm,u=e.formWarningFlag,d=e.setFlag;return null!==t?(0,n.jsxs)("div",{className:"pt-3 mt-5 ml-2 overflow-auto border border-gray-700 rounded-md shadow-md bg-stone-900",children:[(0,n.jsx)("div",{className:"mb-5 text-4xl text-center text-gray-200",children:t.name}),(0,n.jsxs)("form",{className:"grid grid-rows-3 mx-5 gap-14 whitespace-nowrap",children:[(0,n.jsxs)("div",{className:"grid gap-6",children:[(0,n.jsx)(j,{string:"ID",formInfo:t,setForm:c,userJson:s,category:"id",createdTags:i,userInput:t.id?t.id:"",container:a,setContainer:l,tagIndex:o,formWarningFlag:u,setFlag:d}),(0,n.jsx)(j,{string:"Mom ID",formInfo:t,setForm:c,userJson:s,category:"mom_id",createdTags:i,userInput:t.mom_id?t.mom_id:"",container:a,setContainer:l,tagIndex:o,formWarningFlag:u,setFlag:d})]}),(0,n.jsxs)("div",{className:"grid gap-6",children:[(0,n.jsx)(S,{string:"Arabic Locale",category:"ar",userJson:s,setForm:c,formInfo:t,userInput:t.locale?t.locale.ar:"",container:a,setContainer:l,tagIndex:o,formWarningFlag:u,setFlag:d}),(0,n.jsx)(S,{string:"English Locale",category:"en",userJson:s,setForm:c,formInfo:t,userInput:t.locale?t.locale.en:"",container:a,setContainer:l,tagIndex:o,formWarningFlag:u,setFlag:d})]}),(0,n.jsxs)("div",{className:"grid gap-6",children:[(0,n.jsx)(b,{string:"Name",createdTags:i,setForm:c,category:"name",setCreatedTags:r,userInput:t.name?t.name:"",container:a,tagIndex:o,userJson:s,formInfo:t,setContainer:l,formWarningFlag:u,setFlag:d}),(0,n.jsx)(b,{string:"Type",createdTags:i,setForm:c,category:"type",userInput:t.type?t.type:"",container:a,tagIndex:o,userJson:s,setContainer:l,formInfo:t,formWarningFlag:u,setFlag:d})]})]})]}):(0,n.jsx)(n.Fragment,{})};var O=function(e){var r=e.tag,t=e.setShowModal,a=e.container,o=e.setContainer,s=e.userJson,l=e.setTagIndex,i=e.setForm,c=e.selectedTag,u=e.setSelectedTag;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"overflow-x-hidden flex justify-center items-center fixed z-50 md:inset-0 h-modal md:h-full",children:(0,n.jsx)("div",{className:"relative p-4 w-full max-w-md h-full md:h-auto",children:(0,n.jsxs)("div",{className:"relative rounded-lg shadow bg-gray-700 ring-1 ring-gray-500",children:[(0,n.jsx)("button",{onClick:function(){return t(!1)},className:"absolute top-3 right-2.5 text-gray-400 bg-transparent rounded-lg text-sm p-1.5 ml-auto inline-flex items-center hover:bg-gray-800 hover:text-white","data-modal-toggle":"popup-modal",children:(0,n.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}),(0,n.jsxs)("div",{className:"p-6 text-center",children:[(0,n.jsx)("svg",{className:"mx-auto mb-4 w-14 h-14 text-gray-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,n.jsxs)("h3",{className:"mb-5 text-lg font-normal text-gray-200",children:["Are you sure you want to delete ",r.name,"?"]}),(0,n.jsx)("button",{onClick:function(){for(var e in a)for(var n in a[e])if(a[e][n].name===r.name){var d=JSON.parse(JSON.stringify(a));d[e].splice(+n,1);var g=!1;for(var f in c)if(r.name==c[f].name){g=!0;break}if(g){d.splice(+e+1);var h=JSON.parse(JSON.stringify(c));h.splice(+e),l([]),u(h),i(null)}o(d);m(s,r.name)}t(!1)},className:"text-white bg-red-600 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-800 font-medium rounded-lg text-sm inline-flex items-center px-5 py-2.5 text-center mr-2",children:"Yes, I'm sure"}),(0,n.jsx)("button",{onClick:function(){return t(!1)},className:" focus:ring-4 focus:outline-none rounded-lg border text-sm font-medium px-5 py-2.5 focus:z-10 bg-gray-700 text-gray-300 border-gray-500 hover:text-white hover:bg-gray-600 focus:ring-gray-600",children:"No, cancel"})]})]})})}),(0,n.jsx)("div",{className:"opacity-25 fixed inset-0 z-40 bg-black"})]})};var C=function(e){var r=e.tag,t=e.container,o=e.setContainer,s=e.userJson,l=e.setTagIndex,i=e.setForm,c=e.selectedTag,u=e.setSelectedTag,d=(0,a.useState)(!1),g=d[0],m=d[1];return(0,n.jsxs)("div",{className:"",children:[(0,n.jsx)("button",{onClick:function(){return m(!0)},children:(0,n.jsx)("img",{src:"/delete-icon.png",alt:"Delete",width:"20",height:"20"})}),g?(0,n.jsx)(O,{selectedTag:c,setSelectedTag:u,setForm:i,setTagIndex:l,tag:r,setShowModal:m,container:t,setContainer:o,userJson:s}):(0,n.jsx)(n.Fragment,{})]})};var k=function(e){var r=e.tag,t=e.setContainer,a=e.container,o=e.setForm,s=e.setTagIndex,i=e.setSelectedTag,c=e.userJson,u=e.selectedTag,d=e.setFlag,g=[],m=function(){r.children||(r.children=[]);for(var e=function(){var e=0;for(e in a)for(var t in a[e])if(a[e][t].name===r.name)return g.push(e),g.push(t),s(g),e}(),n=[],u=0;u<+e+1;u++)n.push(a[u]);var m=l(c,r.name);m.children||(m.children=[]),n.push(m.children),d(!1),t(n),o(r),i(function(e,r){var t=[],n=function(e,r){for(var a in e){if(e[a].name===r)return t.push(e[a]);if(e[a].children&&n(e[a].children,r))return t.push(e[a])}};return n(e,r),t.reverse(),t}(c,r.name))},f=function(){var e=l(c,r.name);if(!e.children)return!0;if(0==e.children.length)return!0;var t=function(e){for(var r in e){if(e[r].children&&0!=e[r].children.length){if(n=t(e[r].children))continue;return n}if(!e[r].locale)return!1;if(!e[r].locale.ar||!e[r].locale.en)return!1;if(null!==e[r].locale.en.match(/[\u0600-\u06ff]|[\u0750-\u077f]|[\ufb50-\ufbc1]|[\ufbd3-\ufd3f]|[\ufd50-\ufd8f]|[\ufd92-\ufdc7]|[\ufe70-\ufefc]|[\uFDF0-\uFDFD]/))return!1}return!0},n=t(e.children);return n},h=function(){return!!r.locale&&(!(!r.locale.ar||!r.locale.en)&&null===r.locale.en.match(/[\u0600-\u06ff]|[\u0750-\u077f]|[\ufb50-\ufbc1]|[\ufbd3-\ufd3f]|[\ufd50-\ufd8f]|[\ufd92-\ufdc7]|[\ufe70-\ufefc]|[\uFDF0-\uFDFD]/))},x=!1;return u.some((function(e){return e.name===r.name}))?(x="path",u[u.length-1].name==r.name&&(x="current")):x=!1,x?"path"==x?(0,n.jsx)("div",{children:(0,n.jsxs)("div",{className:"relative group",children:[(0,n.jsxs)("button",{onClick:m,className:h()?"transition group-hover:scale-110 duration-100 group shadow-md shadow-gray-500/50 relative border w-40 focus:outline-none font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2 border-gray-600 hover:bg-gray-500 hover:border-gray-400 ring-gray-700 bg-gray-400 text-gray-800":"transition group-hover:scale-110 duration-100 group shadow-md shadow-orange-800 relative border w-40 focus:outline-none font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2  border-orange-600 hover:bg-orange-500 hover:border-orange-400 bg-orange-300 text-orange-800",children:[f()?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)("span",{className:"absolute top-1 right-0 inline-block align-top text-xs mr-2 px-1 rounded bg-orange-400 text-yellow-900",children:"!"}),r.name]}),(0,n.jsx)("div",{className:"transition absolute -top-2 -left-3 opacity-0 ease-in-out duration-200 group-hover:opacity-100",children:(0,n.jsx)(C,{selectedTag:u,setSelectedTag:i,tag:r,setForm:o,setTagIndex:s,container:a,setContainer:t,userJson:c})})]})}):(0,n.jsx)("div",{children:(0,n.jsxs)("div",{className:"relative group",children:[(0,n.jsxs)("button",{onClick:m,className:h()?"transition group-hover:scale-110 duration-100 group shadow-md shadow-gray-500/50 relative border w-40 focus:outline-none font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2 border-gray-600 hover:bg-gray-500 hover:border-gray-400 ring-gray-700 bg-gray-100 text-black":"transition group-hover:scale-110 duration-100 group shadow-md shadow-orange-800 relative border w-40 focus:outline-none font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2  border-orange-600 hover:bg-orange-500 hover:border-orange-400 bg-orange-100 text-orange-900",children:[f()?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)("span",{className:"absolute top-1 right-0 inline-block align-top text-xs mr-2 px-1 rounded bg-orange-400 text-yellow-900",children:"!"}),r.name]}),(0,n.jsx)("div",{className:"transition absolute -top-2 -left-3 opacity-0 ease-in-out duration-200 group-hover:opacity-100",children:(0,n.jsx)(C,{selectedTag:u,setSelectedTag:i,setTagIndex:s,setForm:o,tag:r,container:a,setContainer:t,userJson:c})})]})}):(0,n.jsx)("div",{className:"",children:(0,n.jsxs)("div",{className:"relative group",children:[(0,n.jsxs)("button",{onClick:m,className:h()?"transition group-hover:scale-110 duration-100 group shadow-md shadow-gray-500/50 relative border w-40 max-w-40 focus:outline-none font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2 bg-gray-700 text-white border-gray-600 hover:bg-gray-500 hover:border-gray-400 focus:ring-gray-700 focus:bg-gray-100 focus:text-black":"transition group-hover:scale-110 duration-100 group shadow-md shadow-orange-800 relative border w-40 focus:outline-none font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2 bg-orange-700 text-white border-orange-600 hover:bg-orange-500 hover:border-orange-400 focus:bg-orange-300 focus:text-orange-800",children:[f()?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)("span",{className:"absolute top-1 right-0 inline-block align-top text-xs mr-2 px-1 rounded bg-orange-400 text-yellow-900",children:"!"}),r.name]}),(0,n.jsx)("div",{className:"transition absolute -top-2 -left-3 opacity-0 ease-in-out group-hover:opacity-100",children:(0,n.jsx)(C,{selectedTag:u,setSelectedTag:i,setForm:o,setTagIndex:s,tag:r,container:a,setContainer:t,userJson:c})})]})})};var J=function(e){var r=e.container,t=e.setContainer,o=e.index,s=e.userJson,i=e.selectedTag,c=e.createdTags,u=e.setCreatedTags,g=(0,a.useState)(!1),m=g[0],f=g[1],h=(0,a.useState)(""),x=h[0],v=h[1];return(0,n.jsxs)("div",{className:"",children:[(0,n.jsx)("button",{onClick:function(){f(!0)},className:m?"shadow-md mt-1 shadow-gray-500/50 relative border w-40 focus:outline-none font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2 bg-gray-700 text-white border-gray-600 hover:bg-gray-500 hover:border-gray-400 focus:ring-gray-700 focus:bg-gray-300 focus:text-gray-800scale-110":"transition hover:scale-110 duration-200 shadow-md ml-12 mt-1 shadow-gray-500/50 relative border focus:outline-none font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2 bg-gray-700 text-white border-gray-600 hover:bg-gray-500 hover:border-gray-400 focus:ring-gray-700 focus:bg-gray-300 focus:text-gray-800",children:m?(0,n.jsx)("input",{type:"text",onKeyUp:function(e){if("Enter"==e.key){if(l(s,e.target.value))return void v("Tag already exists elsewhere!");v(""),f(!1);var n=e.target.value;if(""==n)return;var a={name:n,locale:{ar:n,en:""},id:"",mom_id:"",type:"",children:[]},g=JSON.parse(JSON.stringify(r));for(var m in d(s,a,i[o-1]),g[o].push(a),g[o-1])if(g[o-1][m].name==i[o-1].name){g[o-1][m].children.push(a);break}t(g);var h=JSON.parse(JSON.stringify(c));h.push(a),u(h)}},id:"text",autoFocus:!0,className:" shadow-sm border text-md w-full p-2.5 bg-gray-700 border-gray-600 placeholder-gray-400 text-white focus:ring-blue-500 focus:border-blue-500 shadow-sm-light"}):(0,n.jsx)("img",{src:"/icons8-add-new-48.png",alt:"Add",width:"25",height:"25"})}),(0,n.jsx)("p",{className:"text-red-500 text-sm text-center font-bold",children:x})]})};var I=function(e){var r=e.ind,t=e.level,a=e.setContainer,o=e.container,s=e.setForm,l=e.setTagIndex,i=e.userJson,c=e.setSelectedTag,u=e.selectedTag,d=e.createdTags,g=e.setCreatedTags,m=e.setFlag;return(0,n.jsxs)("div",{className:"p-4 w-52 flex flex-col h-full overflow-y-scroll scrollbar bg-opacity-20 bg-gray-900",children:[(0,n.jsx)("div",{className:"justify-center",children:t.map((function(e,r){return(0,n.jsx)("div",{className:"",children:(0,n.jsx)(k,{selectedTag:u,setSelectedTag:c,tag:e,setContainer:a,container:o,setForm:s,setTagIndex:l,userJson:i,setFlag:m})},r)}))}),(0,n.jsx)("div",{className:"",children:(0,n.jsx)(J,{setCreatedTags:g,createdTags:d,container:o,setContainer:a,index:r,userJson:i,selectedTag:u})})]})};function E(e){var r=e.setSelectedTag,t=e.selectedTag,a=e.container,o=e.setContainer,s=e.setTagIndex,l=e.setForm,i=function(e){var n=[];if(0==e){l(null),s([]);var i=JSON.parse(JSON.stringify(a));i.splice(1),o(i),r([])}else{!function(){var r=0;for(r in a)for(var o in a[r])if(t[e-1].name===a[r][o].name)return n.push(r),n.push(o),void s(n)}(),s(n);var c=JSON.parse(JSON.stringify(t));c.splice(e),r(c);var u=JSON.parse(JSON.stringify(a));u.splice(e+1),o(u)}};return(0,n.jsx)("nav",{className:"flex","aria-label":"Breadcrumb",children:(0,n.jsxs)("ol",{className:"inline-flex items-center space-x-1 md:space-x-3",children:[(0,n.jsx)("li",{className:"inline-flex items-center",children:(0,n.jsxs)("a",{onClick:function(){i(0)},className:"cursor-pointer inline-flex items-center text-sm font-medium text-gray-100 hover:text-white",children:[(0,n.jsx)("svg",{className:"text-gray-100 mr-2 w-5 h-5 hover:text-white",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"})}),(0,n.jsx)("div",{className:"text-gray-300 hover:text-white",children:"Home"})]})}),t.map((function(e,r){return(0,n.jsx)("li",{children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("svg",{className:"w-5 h-5 text-gray-100",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),(0,n.jsx)("a",{onClick:function(){i(r+1)},className:"cursor-pointer ml-1 text-sm font-medium md:ml-2 text-gray-300 hover:text-white",children:e.name})]},r+1)},r+1)}))]})})}var D=function(e){return(0,n.jsxs)("div",{className:"col-span-3",children:[(0,n.jsx)("div",{className:" p-2 bg-opacity-90 bg-gray-800 border-x-[1px] border-t-[1px] border-gray-700 mt-5 rounded-t-md",children:(0,n.jsx)(E,{setForm:e.setForm,setTagIndex:e.setTagIndex,selectedTag:e.selectedTag,container:e.container,setContainer:e.setContainer,setSelectedTag:e.setSelectedTag})}),(0,n.jsx)("div",{className:"flex flex-row border-gray-700 bg-gray-800 h-[47.5rem] scrollbar overflow-x-scroll border border-t-[3px] rounded-b-md",children:e.container.map((function(r,t){return(0,n.jsx)("div",{children:(0,n.jsx)(I,{setCreatedTags:e.setCreatedTags,createdTags:e.createdTags,ind:t,level:r,setContainer:e.setContainer,container:e.container,setForm:e.setForm,setTagIndex:e.setTagIndex,userJson:e.userJson,setSelectedTag:e.setSelectedTag,selectedTag:e.selectedTag,setFlag:e.setFlag})},t)}))})]})},P=t(5632),_=t(4017),z=t(2979),M=t.n(z);function L(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function A(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){L(e,r,t[r])}))}return e}var W={menu:function(e,r){return A({},e,{color:"white"})}};function R(e){var r=e.userJson,t=e.setContainer,o=e.setForm,s=e.setSelectedTag,l=e.container,i=e.setTagIndex,c=[],u=function(e){if(e){var n=function(e,r){var t=[],n=function(e,r){for(var a in e){if(e[a].name===r)return t.push(e[a]);if(e[a].children&&n(e[a].children,r))return t.push(e[a])}};return n(e,r),t.reverse(),t}(r,e.value);s(n);var a=n[n.length-1];o(a);var l=r,u=[r];for(var d in n)for(var g in l)if(l[g].name===n[d].name){l=l[g].children?l[g].children:[],u.push(l);break}t(u),function(e,r){var t=0;for(t in e)for(var n in e[t])if(r===e[t][n].name)return c.push(t),c.push(n),void i(c)}(u,e.value),i(c)}},d=g(r),m=d.map((function(e){return{value:e,label:e}}));return(0,a.useEffect)((function(){d=g(r),m=d.map((function(e){return{value:e,label:e}}))}),[l]),(0,n.jsx)("div",{className:"w-[32rem]",children:(0,n.jsx)(M(),{onChange:function(e){return u(e)},isClearable:!0,options:m,styles:W,placeholder:"Search...",isSearchable:!0,filterOption:(0,_.c)({ignoreAccents:!1}),theme:function(e){return A({},e,{colors:{neutral80:"#FFFFFF",neutral60:"hsl(0, 0%, 80%)",neutral50:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral30:"hsl(0, 0%, 50%)",neutral20:"hsl(0, 0%, 40%)",neutral10:"hsl(0, 0%, 30%)",neutral5:"hsl(0, 0%, 20%)",neutral0:"hsl(0, 0%, 10%)",primary:"#2684FF",primary75:"#DEEBFF",primary50:"#hsl(0, 0%, 80%)",primary25:"hsl(0, 0%, 40%)"}})}})})}function B(e){var r=e.duplicates,t=(e.userJson,e.setShowDuplicates),o=e.showDuplicates;return(0,a.useEffect)((function(){0===r.length&&t(!1)}),[r]),(0,n.jsxs)("div",{id:"alert-additional-content-2",className:"w-1/4 p-4 mb-4 rounded-lg bg-red-200/90 absolute z-10 right-16 top-16",role:"alert",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("svg",{className:"mr-2 w-5 h-5 text-red-800",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),(0,n.jsx)("h3",{className:"text-lg font-medium text-red-800",children:"The following categories are duplicated:"})]}),(0,n.jsx)("div",{className:"list-disc mt-2 mb-4 text-sm text-red-800",children:r.map((function(e,r){return(0,n.jsx)("li",{children:e},r)}))}),(0,n.jsx)("a",{onClick:function(){o&&t(!1)},children:(0,n.jsxs)("svg",{className:"cursor-pointer absolute top-3 right-3",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#cd6666",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,n.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})}function U(e){var r=e.userJson,t=e.setContainer,o=e.setForm,s=(e.selectedTag,e.setSelectedTag),l=e.container,i=e.setTagIndex,c=(0,a.useState)(u(r)),d=c[0],g=c[1],m=(0,a.useState)(!1),f=m[0],h=m[1];return(0,a.useEffect)((function(){g(u(r))}),[l]),(0,n.jsxs)("div",{children:[(0,n.jsx)("nav",{className:"border-gray-600 border-y-[1px] py-2.5 rounded bg-neutral-900 px-[6rem]",children:(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)(R,{setTagIndex:i,userJson:r,container:l,setContainer:t,setForm:o,setSelectedTag:s}),(0,n.jsx)("img",{src:"/haraj.png",alt:"Haraj Logo",width:"150",height:"33"}),(0,n.jsx)("div",{className:"hidden justify-between items-center w-full md:flex md:w-auto md:order-1",id:"mobile-menu-3",children:(0,n.jsxs)("ul",{className:"flex flex-col mt-4 md:flex-row md:space-x-8 md:mt-0 md:text-sm md:font-medium",children:[(0,n.jsx)("li",{children:0!=d?(0,n.jsx)("a",{onClick:function(){h(!f)},children:(0,n.jsxs)("div",{className:"pt-3 pr-4 pl-3 text-sm rounded-lg cursor-pointer bg-neutral-900 text-red-600 hover:text-red-500",role:"alert",children:["Found ",(0,n.jsx)("span",{className:"font-medium",children:d.length})," Duplicate Categories!"]})}):(0,n.jsx)("div",{className:"pt-3 pr-4 pl-3 text-sm rounded-lg bg-neutral-900 text-green-600",role:"alert",children:"Found 0 Duplicate Categories"})}),(0,n.jsx)("li",{children:(0,n.jsx)("button",{type:"button",onClick:function(){var e="data:text/json;chatset=utf-8,".concat(encodeURIComponent(JSON.stringify(r))),t=document.createElement("a");t.href=e,t.download="Export.json",t.click()},download:"Export.json",className:'transition duration-200 hover:scale-105 className="text-white bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 hover:bg-gradient-to-br focus:ring-1 focus:outline-none focus:ring-blue-300 dark:focus:ring-blue-800 shadow-lg shadow-blue-500/50 dark:shadow-lg dark:shadow-blue-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center',children:(0,n.jsx)("div",{className:"text-white",children:"Export JSON"})})})]})})]})}),f?(0,n.jsx)(B,{duplicates:d,userJson:r,showDuplicates:f,setShowDuplicates:h}):(0,n.jsx)(n.Fragment,{})]})}function H(e){var r=e.userJson,t=e.numberOfMissing,o=e.setContainer,s=e.truth,i=e.setmissingNodes,u=(e.setSelectedTag,e.setForm,e.selectedTag),g=(0,a.useState)(!0),m=g[0],h=g[1];(0,a.useEffect)((function(){h(0!==t)}),[t]);var x=function(){h(1!=m)};return m?(0,n.jsxs)("div",{id:"alert-additional-content-4",className:"p-4 mb-4 transform rounded-lg bg-yellow-200",itemID:"alert",role:"alert",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("svg",{className:"mr-2 w-5 h-5 text-yellow-800",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),(0,n.jsxs)("h3",{className:"text-lg font-medium text-yellow-800",children:["Found ",t," missing categories!"]})]}),(0,n.jsxs)("div",{className:"mt-2 mb-4 text-sm text-yellow-800",children:["According to the ",(0,n.jsx)("a",{className:"text-blue-600 hover:text-blue-400 focus:text-blue-300",href:"https://legacy.haraj.com.sa/sitemap.php?format=json",children:"ground truth"}),", ",t," categories are missing from this file, please address them immediately."]}),(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsxs)("button",{onClick:function(){!function(e,r){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=function(e,r,a){for(var o in e)l(r,e[o].name)||(t&&console.log("Adding ".concat(e[o].name)),d(r,e[o],a,!0,!1)),e[o].children&&n(e[o].children,r,e[o])};if(t){var a=performance.now();n(e,r,null);var o=performance.now();console.log("Time taken: ".concat(o-a,"ms"))}else n(e,r,null)}(s,r),f(r);var e=[r];for(var t in u)e.push(l(r,u[t].name).children);o(e),i(c(s,r).length)},type:"button",className:"text-white focus:outline-none focus:bg-yellow-900 font-medium rounded-lg text-xs px-3 py-1.5 mr-2 text-center inline-flex items-center bg-yellow-700 hover:bg-yellow-800",children:[(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mr-1",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"#cec576",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,n.jsx)("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),(0,n.jsx)("line",{x1:"8",y1:"12",x2:"16",y2:"12"})]}),"Add missing categories"]}),(0,n.jsx)("button",{onClick:x,type:"button",className:"bg-transparent border focus:text-white hover:bg-yellow-700 focus:outline-none focus:bg-yellow-900 font-medium rounded-lg text-xs px-3 py-1.5 text-center border-yellow-800 text-yellow-700 hover:text-white","data-dismiss-target":"#alert-additional-content-4","aria-label":"Close",children:"Dismiss"})]})]}):(0,n.jsx)("a",{onClick:x,children:(0,n.jsx)("div",{id:"alert-additional-content-4",className:"p-4 mb-4 cursor-pointer rounded-lg bg-yellow-200 hover:bg-yellow-100",itemID:"alert",role:"alert",children:(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsx)("svg",{className:"w-5 h-5 text-yellow-800",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})})})})}var K=function(e){var r=(0,P.useRouter)(),t=(0,a.useState)([]),o=t[0],s=t[1],l=(0,a.useState)(null),i=l[0],u=l[1],d=(0,a.useState)(null),g=d[0],m=d[1],h=(0,a.useState)([]),x=h[0],v=h[1],p=(0,a.useState)(!0),b=p[0],y=p[1];if(r.isReady){if(void 0==r.query.userJson)return r.push("/"),null;var w=(0,a.useState)(JSON.parse(r.query.groundTruth)),j=w[0],N=(w[1],(0,a.useState)(JSON.parse(r.query.userJson))),T=N[0];N[1];f(T);var S=(0,a.useState)([T]),O=S[0],C=S[1];(0,a.useEffect)((function(){I(c(j,T))}),[O]);var k=(0,a.useState)(c(j,T)),J=k[0],I=k[1];return(0,n.jsxs)("div",{className:"",children:[(0,n.jsx)(U,{userJson:T,container:O,setTagIndex:m,selectedTag:o,setSelectedTag:s,setContainer:C,setForm:u}),(0,n.jsxs)("div",{className:"grid grid-cols-4 mx-[6rem] mb-4",children:[(0,n.jsx)(D,{userJson:T,setForm:u,setCreatedTags:v,createdTags:x,container:O,setContainer:C,setTagIndex:m,setSelectedTag:s,selectedTag:o,setFlag:y}),(0,n.jsx)(F,{setCreatedTags:v,createdTags:x,selectedTag:o,setTagIndex:m,setForm:u,formInfo:i,container:O,tagIndex:g,userJson:T,setContainer:C,formWarningFlag:b,setFlag:y})]}),(0,n.jsx)("div",{className:"fixed left-5 bottom-1 opacity-80 z-10",children:J.length>0?(0,n.jsx)(H,{selectedTag:o,setForm:u,userJson:T,setSelectedTag:s,setContainer:C,numberOfMissing:J.length,truth:j,setmissingNodes:I}):(0,n.jsx)(n.Fragment,{})})]})}return(0,n.jsx)(n.Fragment,{})}}},function(e){e.O(0,[287,774,888,179],(function(){return r=6328,e(e.s=r);var r}));var r=e.O();_N_E=r}]);